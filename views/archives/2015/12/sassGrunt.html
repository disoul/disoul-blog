<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link href="/static/public/bower_components/material-design-lite/material.css" rel="stylesheet"><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"><link href="/static/public/css/article.css" rel="stylesheet"><title>Grunt下自动编译Scss</title></head><body><div class="mdl-layout mdl-js-layout"><header class="mdl-layout__header mdl-layout__header--waterfall"><div class="mdl-layout__header-row"><a href="/" class="mdl-layout-title">My Blog</a><div class="mdl-layout-spacer"></div><div class="mdl-layout-spatfield mdl-js-textfield mdl-textfield--expandable mdl-textfield--floating-label mdl-textfield--align-rightl mdl-textfield--align-right"><label for="waterfall-exp" class="mdl-button mdl-js-button mdl-button--icon"><i class="material-icons">search</i></label><div class="mdl-textfield__expandable-holder"><input type="text" name="sample" id="waterfall-exp" class="mdl-textfield__input"></div></div></div><div class="mdl-layout__header-row"><div class="mdl-layout-spacer"></div><nav class="mdl-navigation"><a href="/" class="mdl-navigation__link">Home</a><a href="/tag/index.html" class="mdl-navigation__link">Tags</a><a href="/archives/index.html" class="mdl-navigation__link">Archives</a><a href="" class="mdl-navigation__link">AboutMe</a></nav></div></header><div class="mdl-layout__drawer"><span class="mdl-layout-title">My Blog</span><nav class="mdl-navigation"><a href="/" class="mdl-navigation__link">Home</a><a href="/tag/index.html" class="mdl-navigation__link">Tags</a><a href="/archives/index.html" class="mdl-navigation__link">Archives</a><a href="" class="mdl-navigation__link">AboutMe</a></nav></div><main id="main" class="mdl-layout__content"><div class="page-content"><div id="article-block"><h2 class="title">Grunt下自动编译Scss</h2><div class="tags"><a href="/tag/博客搭建.html">博客搭建</a><a href="/tag/web.html">web</a></div><div class="article-content"><p>早些时候气体说如果写scss的话不把css给ignore掉是不优雅的<br>
当时因为测试方便就没弄了<br>
于是现在给博客弄了一个自动编译scss的buff，这样ignore就顺理成章了</p>
<p>为了实现这个效果，Grunt下需要2个插件</p>
<ul>
<li>sass</li>
<li>watch</li>
</ul>
<p>前者不用多说，编译sass用的，后者是一个监视插件，可以监视文件的修改打开等变动然后触发相应的task执行任务<br>
@@</p>
<h1>配置Sass</h1>
<p>因为sass是基于ruby的，所以我们要首先安装ruby环境并安装sass</p>
<h2>Ruby和Sass</h2>
<p>因为我是ubuntu，所以直接<br>
<code>sudo apt-get install ruby</code><br>
之后测试<code>gem</code>命令正常则成功，其他的系统安装详见&lt;a href=&quot;https://www.ruby-lang.org/en/downloads/&quot;&gt;ruby官网&lt;/a&gt;<br>
之后用gem安装sass<br>
<code>sudo gem install sass</code></p>
<h2>Grunt下Sass配置</h2>
<p>下面配置Grunt下的sass插件，关于Grunt的入门介绍上一篇介绍过了，这里直接开始配置</p>
<h3>安装插件</h3>
<p>按照插件&lt;a href=&quot;https://www.npmjs.com/package/grunt-contrib-sass&quot;&gt;官方文档&lt;/a&gt;的步骤，输入<br>
<code>npm install grunt-contrib-sass --save-dev</code></p>
<h3>修改Gruntfile</h3>
<p>加入<code>grunt.loadNpmTasks('grunt-contrib-sass');</code><br>
下面给出配置格式</p>
<pre><code class="language-js">grunt.initConfig({
  sass: {                              <span class="hljs-comment">// Task </span>
    dist: {                            <span class="hljs-comment">// Target </span>
      options: {                       <span class="hljs-comment">// Target options </span>
        style: <span class="hljs-string">'expanded'</span>
      },
      files: {                         <span class="hljs-comment">// Dictionary of files </span>
        <span class="hljs-string">'main.css'</span>: <span class="hljs-string">'main.scss'</span>,       <span class="hljs-comment">// 'destination': 'source' </span>
        <span class="hljs-string">'widgets.css'</span>: <span class="hljs-string">'widgets.scss'</span>
      }
    }
  }
});
 
grunt.loadNpmTasks(<span class="hljs-string">'grunt-contrib-sass'</span>);
 
grunt.registerTask(<span class="hljs-string">'default'</span>, [<span class="hljs-string">'sass'</span>]);
</code></pre>
<p>其中<code>style</code>有4种，为nested, compact, compressed, expanded.<br>
files定义了编译的目标文件和编译后文件，除了上述方式，还可以使用如下格式</p>
<pre><code class="language-js">      files: [{
        expand: <span class="hljs-literal">true</span>,
        cwd: <span class="hljs-string">'styles'</span>,
        src: [<span class="hljs-string">'*.scss'</span>],
        dest: <span class="hljs-string">'../public'</span>,
        ext: <span class="hljs-string">'.css'</span>
      }]
</code></pre>
<p>将文件夹内所有scss文件直接编译到目标路径<br>
这样sass的配置告一段落</p>
<h1>配置Watch</h1>
<h2>安装watch</h2>
<p>同样的方法这里不赘述，具体见&lt;a href=&quot;https://www.npmjs.com/package/grunt-contrib-watch&quot;&gt;文档&lt;/a&gt;<br>
<code>npm install grunt-contrib-watch --save-dev</code></p>
<h2>修改Gruntfile</h2>
<p>加入<code>grunt.loadNpmTasks('grunt-contrib-watch');</code><br>
这里只需要简单地检测.scss文件,修改后执行sass的task就行了<br>
格式如下</p>
<pre><code class="language-js">watch: {                                                                   
  script: {                                                                
    files: [                                                               
      <span class="hljs-string">'&lt;%= meta.scssPath%&gt;/**/*.scss'</span>                                      
    ],                                                                     
    tasks: [<span class="hljs-string">'sass'</span>],                                                       
    options: {                                                             
    },                                                                     
  }                                                                        
}
</code></pre>
<p>最后执行<code>grunt watch</code><br>
这样每当scss文件修改，就会输出下面这样的log</p>
<pre><code class="language-sh"><span class="hljs-string">"blog/static/css/scss/index.scss"</span> changed.
Running <span class="hljs-string">"sass:dist"</span> (sass) task^[[24m

Done, without errors.^[[39m
Completed <span class="hljs-keyword">in</span> 4.023s at Tue Jul 28 2015 22:49:29 GMT+0800 (CST) - Waiting...
</code></pre>
</div></div></div><footer class="mdl-mini-footer"><div class="mdl-mini-footer__left-section"><div class="mdl-logo"> 
My Blog <i class="material-icons">person</i> Disoul</div></div></footer></main></div></body></html><script src="/static/public/bower_components/material-design-lite/material.min.js"></script>